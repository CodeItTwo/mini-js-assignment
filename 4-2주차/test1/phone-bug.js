// í•¸ë“œí° ë²ˆí˜¸ ê²€ì¦ê¸°
// ğŸš¨ ë²„ê·¸: íŠ¹ì • ë²ˆí˜¸ë“¤ì´ ì œëŒ€ë¡œ ê²€ì¦ë˜ì§€ ì•ŠìŒ

/*
í•¸ë“œí° ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ í˜•ì‹ì¸ì§€ ê²€ì¦í•˜ëŠ” í•¨ìˆ˜
*/
function validatePhone(phoneNumber) {
    if(!phoneNumber || phoneNumber.trim() === '') {
        return "âŒ í•¸ë“œí° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
    }

    const validPrefixes = ['010', '011', '016', '017', '018', '019'];
    const phoneParts = phoneNumber.replace(/\s/g, "").split("-");  // âœ… phoneParts = [[010], [1234], [7284]]
                                                                    // âœ… /\s: ê³µë°±ë¬¸ì, g: ë¬¸ìì—´ ë‚´ ëª¨ë“  ê³µë°±ë¬¸ìë¥¼ ì°¾ìŒ, "": ì°¾ì€ ê³µë°±ì„ ""ë¡œ ì¹˜í™˜
    function ifOnlyNumbers(str) {
        return /^\d+$/.test(str);
    }


    //const ì¡°ê±´ë¬¸ = false
    // ğŸš¨ ë²„ê·¸ë¥¼ í•´ê²°í•˜ê³  ì•Œë§ì€ ì¡°ê±´ë¬¸ì„ ê¸°ì…í•˜ì„¸ìš”
    
    // 1. í•˜ì´í”ˆì´ í¬í•¨ëœ í˜•ì‹ì¸ì§€ í™•ì¸
    if (phoneParts.length !== 3) {  // âœ… phonePartsëŠ” phoneNumberë¥¼ í•˜ì´í”ˆ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆˆ ë¬¸ìì—´ì˜ ë°°ì—´ë¡œ, í•­ìƒ ê¸¸ì´ê°€ 3ì´ ë˜ì–´ì•¼í•¨
        return "âŒ ì˜¬ë°”ë¥¸ ê¸¸ì´ê°€ ì•„ë‹™ë‹ˆë‹¤.";
    }
    
    // 2. í•˜ì´í”ˆ ìœ„ì¹˜ í™•ì¸ (4ë²ˆì§¸, 9ë²ˆì§¸ ìë¦¬) âœ… + 8ë²ˆì§¸ ìë¦¬ì—ë„ ìˆì„ ìˆ˜ ìˆìŒ(ì¤‘ê°„ë²ˆí˜¸ê°€ 3ìë¦¬ì¼ ë•Œ)
    if (phoneParts[0].length !== 3 || !(phoneParts[1].length === 3 || phoneParts[1].length === 4) || phoneParts[2].length !== 4) {
        return "âŒ í•˜ì´í”ˆ ìœ„ì¹˜ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.";
    }

    // ğŸš¨ ë²„ê·¸: ëª¨ë“  ìœ íš¨í•œ ì•ìë¦¬ë¥¼ ì²´í¬í•˜ì§€ ëª»í•¨
    if (!validPrefixes.includes(phoneParts[0])) {   //âœ… ìœ„ì—ì„œ ì •ì˜í•œ ValidPrefixes í™œìš©
        return "âŒ ì§€ì›í•˜ì§€ ì•ŠëŠ” í†µì‹ ì‚¬ ë²ˆí˜¸ì…ë‹ˆë‹¤.";
    }

    
    // ì¤‘ê°„ ë²ˆí˜¸ (4ìë¦¬)
    // ğŸš¨ ë²„ê·¸: ìˆ«ìì¸ì§€ ì œëŒ€ë¡œ í™•ì¸í•˜ì§€ ëª»í•¨
    if (!ifOnlyNumbers(phoneParts[1])) {    // âœ… ìœ„ì—ì„œ ì •ì˜í•œ ifOnlyNumbers í•¨ìˆ˜ í™œìš©
        return "âŒ ì¤‘ê°„ ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    }
    
    // ë’·ìë¦¬ ë²ˆí˜¸ (4ìë¦¬)
    // ğŸš¨ ë²„ê·¸: ìˆ«ìì¸ì§€ ì œëŒ€ë¡œ í™•ì¸í•˜ì§€ ëª»í•¨
    if (!ifOnlyNumbers(phoneParts[2])) {    // âœ… ìœ„ì—ì„œ ì •ì˜í•œ ifOnlyNumbers í•¨ìˆ˜ í™œìš©
        return "âŒ ë’·ìë¦¬ ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    }

    return "âœ… ì˜¬ë°”ë¥¸ í•¸ë“œí° ë²ˆí˜¸ì…ë‹ˆë‹¤!";
}

/*
ì „ë‹¬ë°›ì€ í•¸ë“œí° ë²ˆí˜¸ë¥¼ ê²€ì¦í•˜ê³  ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
*/
function testPhone(phoneNumber) {
    const result = validatePhone(phoneNumber);
    const display = phoneNumber === '' ? '(ë¹ˆ ë¬¸ìì—´)' : phoneNumber;
    
    document.getElementById('result').innerHTML = 
        `<h3>${display} ê²€ì¦ ê²°ê³¼:</h3><p>${result}</p>`;
}

// í˜ì´ì§€ ë¡œë“œì‹œ ì„¤ëª… í‘œì‹œ
window.onload = function() {
    document.getElementById('result').innerHTML = 
        `<p>ğŸ‘† ìœ„ì˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•´ì„œ ê° ë²ˆí˜¸ì˜ ê²€ì¦ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!</p>
         <p><strong>íŠ¹íˆ 011ë²ˆê³¼ ë¹ˆ ë¬¸ìì—´ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”. ë¬¸ì œê°€ ìˆì„ ê²ë‹ˆë‹¤...</strong></p>`;
};